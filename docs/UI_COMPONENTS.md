# 🖼️ 用户界面组件 (UI Components)

UI 模块位于 `resona_desktop_pet/ui/`，采用 PySide6 构建。

## 1. MainWindow (`luna/main_window.py`)
整个程序的核心 UI 控制器。
- **无边框透明窗口**：实现了桌面宠物的透明悬浮效果。
- **状态管理**：管理宠物的“闲置”、“思考”、“说话”、“录音”等各种状态，并协调各组件的显示。
- **交互处理**：处理鼠标拖拽、缩放（Alt+滚轮）、右键菜单等交互。
- **自动隐藏/淡出**：支持全屏模式自动隐藏，以及长时间不操作时的闲置淡出效果。

## 2. CharacterView (`luna/character_view.py`)
专门负责立绘显示。
- **多服装支持 (Outfits)**：根据 `sum.json` 索引不同的服装目录。
- **表情切换**：实现从情感标签到具体图片文件的随机或确定性选取。
- **高性能渲染**：优化了缩放渲染，保证在透明背景下的平滑显示。

## 3. IOOverlay (`luna/io_overlay.py`)
对话框组件。
- **输入/输出一体化**：支持用户文本输入和 LLM 回复显示。
- **自动排版**：根据立绘位置自动调整对话框的弹出位置。
- **动画效果**：具备渐变显示效果，提升视觉体验。

## 4. 托盘图标 (`tray_icon.py`)
- 提供后台运行支持。
- 快捷操作菜单（打开设置、切换角色包、退出等）。

## 5. 设置对话框 (`settings_dialog.py` / `simple_settings.py`)
- **全量设置**：提供详细的 API 配置、TTS 参数、UI 行为等设置。
- **简单模式**：为小白用户设计的精简配置界面。

---
本文档部分使用大语言模型辅助生成，翻译亦由大语言模型完成，如出现任何偏差不代表作者的真实意愿。
